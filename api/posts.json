{"total":4,"pageSize":10,"pageCount":1,"data":[{"title":"后门Shellcode编写","slug":"MyShellCode","date":"2018-11-30T12:22:18.000Z","updated":"2018-11-30T13:14:37.032Z","comments":true,"path":"api/articles/MyShellCode.json","excerpt":"","keywords":null,"cover":"/2018/11/30/MyShellCode/t_01.png","content":"<h2 id=\"一、-实验目的\"><a href=\"#一、-实验目的\" class=\"headerlink\" title=\"一、 实验目的\"></a>一、 实验目的</h2><p>1.掌握后门shellcode编写。</p>\n<p>3.熟悉后门的整体思路。</p>\n<p>3.理解进程间通信和管道，了解客户服务程序工作流程。</p>\n<h2 id=\"二、-实验内容\"><a href=\"#二、-实验内容\" class=\"headerlink\" title=\"二、 实验内容\"></a>二、 实验内容</h2><p>1.后门shellcode的编写</p>\n<p>注： 双管道后门实现，反连后门编写。</p>\n<p>三、实验设备</p>\n<p>VMware Pro 14.0</p>\n<p>VC 6.0</p>\n<p>虚拟机：</p>\n<p>XP家庭版</p>\n<p>KaliLinux</p>\n<p>Ubuntu 1604</p>\n<p>XP的IP：</p>\n<p><img src=\"/2018/11/30/MyShellCode/t_01.png\" alt=\"1543579663820\"></p>\n<h2 id=\"三、-实验步骤\"><a href=\"#三、-实验步骤\" class=\"headerlink\" title=\"三、 实验步骤\"></a>三、 实验步骤</h2><h3 id=\"第一部分-双管道后门shellcode\"><a href=\"#第一部分-双管道后门shellcode\" class=\"headerlink\" title=\"第一部分  双管道后门shellcode\"></a>第一部分  双管道后门shellcode</h3><p>测试双管道后门C语言格式的代码</p>\n<p><img src=\"/2018/11/30/MyShellCode/t_02.png\" alt=\"img\"> </p>\n<p><img src=\"/2018/11/30/MyShellCode/t_00.png\" alt=\"img\"> </p>\n<p>好了，现在我们可以通过本机的linux上的telnet工具直接连上靶机，进入CMD操控，这就相当于只要让靶机偷偷运行了该程序，我们可以在攻击机上操控靶机了。接下来我们便要研究如何让其转shellcode。</p>\n<h4 id=\"获取相关函数的地址\"><a href=\"#获取相关函数的地址\" class=\"headerlink\" title=\"获取相关函数的地址\"></a><strong>获取相关函数的地址</strong></h4><p><img src=\"/2018/11/30/MyShellCode/t_03.png\" alt=\"img\"> </p>\n<h4 id=\"修改函数地址并运行\"><a href=\"#修改函数地址并运行\" class=\"headerlink\" title=\"修改函数地址并运行\"></a><strong>修改函数地址并运行</strong></h4><p><img src=\"/2018/11/30/MyShellCode/t_04.png\" alt=\"img\"> </p>\n<p><img src=\"/2018/11/30/MyShellCode/t_05.png\" alt=\"img\"> </p>\n<p><img src=\"/2018/11/30/MyShellCode/t_06.png\" alt=\"img\"> </p>\n<h4 id=\"转为机器码\"><a href=\"#转为机器码\" class=\"headerlink\" title=\"转为机器码\"></a><strong>转为机器码</strong></h4><p><img src=\"/2018/11/30/MyShellCode/t_07.png\" alt=\"img\"> </p>\n<p><img src=\"/2018/11/30/MyShellCode/t_08.png\" alt=\"img\"> </p>\n<h4 id=\"按地址取出机器码\"><a href=\"#按地址取出机器码\" class=\"headerlink\" title=\"按地址取出机器码\"></a><strong>按地址取出机器码</strong></h4><p><img src=\"/2018/11/30/MyShellCode/t_09.png\" alt=\"img\"> </p>\n<p><strong>套入shellcode运行模板中</strong></p>\n<p><img src=\"/2018/11/30/MyShellCode/t_10.png\" alt=\"img\"> </p>\n<h4 id=\"测试连接，运行成功！\"><a href=\"#测试连接，运行成功！\" class=\"headerlink\" title=\"测试连接，运行成功！\"></a><strong>测试连接，运行成功！</strong></h4><p><img src=\"/2018/11/30/MyShellCode/t_11.png\" alt=\"img\"> </p>\n<h3 id=\"第二部分-反连后门shellcode编写\"><a href=\"#第二部分-反连后门shellcode编写\" class=\"headerlink\" title=\"第二部分  反连后门shellcode编写\"></a>第二部分  <strong>反连后门shellcode编写</strong></h3><h4 id=\"测试C代码在靶机运行，然后用指定IP的linux监听830端口，连接成功。\"><a href=\"#测试C代码在靶机运行，然后用指定IP的linux监听830端口，连接成功。\" class=\"headerlink\" title=\"测试C代码在靶机运行，然后用指定IP的linux监听830端口，连接成功。\"></a><strong>测试C代码在靶机运行，然后用指定IP的linux监听830端口，连接成功。</strong></h4><p><img src=\"/2018/11/30/MyShellCode/t_12.png\" alt=\"img\"> <img src=\"/2018/11/30/MyShellCode/t_13.png\" alt=\"img\"></p>\n<h4 id=\"改写成汇编，先取出相关函数地址\"><a href=\"#改写成汇编，先取出相关函数地址\" class=\"headerlink\" title=\"改写成汇编，先取出相关函数地址\"></a><strong>改写成汇编，先取出相关函数地址</strong></h4><p><img src=\"/2018/11/30/MyShellCode/t_14.png\" alt=\"img\"> </p>\n<h4 id=\"翻译成汇编时，应注意：\"><a href=\"#翻译成汇编时，应注意：\" class=\"headerlink\" title=\"翻译成汇编时，应注意：\"></a><strong>翻译成汇编时，应注意：</strong></h4><p><strong>①**</strong>取出IP和端口号的十六进制代码，并放入汇编中**</p>\n<p><img src=\"/2018/11/30/MyShellCode/t_15.png\" alt=\"img\"> </p>\n<p><img src=\"/2018/11/30/MyShellCode/t_16.png\" alt=\"img\"> </p>\n<p><strong>②WSASocket函数比Socket函数多三个参数，先push 3个0</strong> </p>\n<p><img src=\"/2018/11/30/MyShellCode/t_17.png\" alt=\"img\"> </p>\n<p><strong>③用 WSAsocket 来替换cmd 的输入输出句柄</strong><img src=\"/2018/11/30/MyShellCode/t_18.png\" alt=\"img\"></p>\n<h4 id=\"接着调试汇编代码，运行成功，现获取机器码。\"><a href=\"#接着调试汇编代码，运行成功，现获取机器码。\" class=\"headerlink\" title=\"接着调试汇编代码，运行成功，现获取机器码。\"></a><strong>接着调试汇编代码，运行成功，现获取机器码。</strong></h4><p><img src=\"/2018/11/30/MyShellCode/t_19.png\" alt=\"img\"></p>\n<h4 id=\"设置断点，找到汇编的开始和结尾处，按地址取机器码\"><a href=\"#设置断点，找到汇编的开始和结尾处，按地址取机器码\" class=\"headerlink\" title=\"设置断点，找到汇编的开始和结尾处，按地址取机器码\"></a><strong>设置断点，找到汇编的开始和结尾处，按地址取机器码</strong></h4><p><img src=\"/2018/11/30/MyShellCode/t_20.png\" alt=\"img\"></p>\n<p><img src=\"/2018/11/30/MyShellCode/t_21.png\" alt=\"img\"></p>\n<p><strong>取出后转成十六进制</strong></p>\n<p><img src=\"/2018/11/30/MyShellCode/t_22.png\" alt=\"img\"> </p>\n<h4 id=\"同理，放入shellcode的执行模板，测试结果，成功。\"><a href=\"#同理，放入shellcode的执行模板，测试结果，成功。\" class=\"headerlink\" title=\"同理，放入shellcode的执行模板，测试结果，成功。\"></a><strong>同理，放入shellcode的执行模板，测试结果，成功。</strong></h4><p><img src=\"/2018/11/30/MyShellCode/t_23.png\" alt=\"img\"> </p>\n<h4 id=\"在linux上监听830端口\"><a href=\"#在linux上监听830端口\" class=\"headerlink\" title=\"在linux上监听830端口\"></a><strong>在linux上监听830端口</strong></h4><p><img src=\"/2018/11/30/MyShellCode/t_24.png\" alt=\"img\"></p>\n<h4 id=\"成功弹出CMD界面\"><a href=\"#成功弹出CMD界面\" class=\"headerlink\" title=\"成功弹出CMD界面\"></a><strong>成功弹出CMD界面</strong></h4><h2 id=\"五、-运行结果及分析\"><a href=\"#五、-运行结果及分析\" class=\"headerlink\" title=\"五、 运行结果及分析\"></a>五、 <strong>运行结果及分析</strong></h2><p>双管道后门中，Shellcode的功能主要为：在目标机器开一个Telnet 服务器，监听某个端口，然后等待攻击机来连接。当攻击机连接之后，为它开创一个cmd.exe，把攻击机的输入输出和cmd.exe的输入输出联系起来。但这种模式在有内部网络和外网的不同的环境中有所不足，且要攻击机主动telnet连接，无法实时监控靶机状态。</p>\n<p><img src=\"/2018/11/30/MyShellCode/t_25.png\" alt=\"img\"></p>\n<p>反向连接：通常的网络连接程序是由客户端通过服务器开放的端口连接到服务器，反向连接是客户端打开服务器端口，由服务器主动连接客户端。反向连接这种方式常用于绕过防火墙和路由器安全限制。一旦连接建立网络通讯，远程主机就可以向后门发送命令。这种通讯方法更有助于控制受控机器，也更不容易检测。</p>\n<p><img src=\"/2018/11/30/MyShellCode/t_26.png\" alt=\"img\"></p>\n<h2 id=\"六、-实验总结和感受\"><a href=\"#六、-实验总结和感受\" class=\"headerlink\" title=\"六、 实验总结和感受\"></a>六、 <strong>实验总结和感受</strong></h2><p>我之前一直以为平常我们的设备是较为安全的——谁会无聊到入侵我们这些普通学生的电子设备呢？但事与愿违，网络攻击的方式实在是花样百出，网络上报道的隐私资料被窃取的新闻报道亦是层出不穷。“吓”得我也给我所有的摄像头都贴上一块黑胶，以防被别人偷窥生活。</p>\n<p>事实证明，在网络攻防这场战役中，攻击者只要拿下靶机的root权限，就相当于斩敌将之首级，更准确地说，是让敌将成为你的傀儡，这也是傀儡机技术的关键所在。经过本课的了解和学习，我才明白要攻陷一个人的设备实在是太容易了，只要能套取到本人的那么一点点信任，让木马、病毒等的苗头扎根于设备之中，那么这台设备便沦陷了，绕过防火墙的检测亦不在话下。当然如今防黑客的技术也在不断进步，黑客技术和安全技术总是不断彼此促进的，在两者的平衡之中，我们的信息安全大体上还是有所保障的。</p>\n<p>网络攻防技术是一个实践性很强的学科，这次编写shellcode的过程中，由于对汇编的不熟、对计算机底层原理的陌生等原因，出现了很多让人头疼的bug，所幸的是最后还是完成了，这也让我学到了很多，对各个实验步骤也有了更深入的理解，要想学会更高级的攻防技术，我们还需掌握更多底层原理。</p>\n<p>人性的漏洞永远是最容易攻破的地方。因为计算机的漏洞是可以不断打补丁补上的，而人性却是难移的。能否保障自身设备上的信息安全，关键还得靠自己明辨是非。</p>\n","text":"一、 实验目的1.掌握后门shellcode编写。3.熟悉后门的整体思路。3.理解进程间通信和管道，了解客户服务程序工作流程。二、 实验内容1.后门shellcode的编写注： 双管道后门实现，反连后门编写。三、实验设备VMware Pro 14.0VC 6.0虚拟机：XP家庭版","link":"","raw":null,"photos":[],"categories":[{"name":"study","slug":"study","count":1,"path":"api/categories/study.json"}],"tags":[{"name":"shellcode","slug":"shellcode","count":1,"path":"api/tags/shellcode.json"}]},{"title":"About somebody","slug":"About-somebody","date":"2018-11-30T11:47:10.000Z","updated":"2018-11-30T11:48:03.188Z","comments":true,"path":"api/articles/About-somebody.json","excerpt":"","keywords":null,"cover":null,"content":"<p>Ahhh, 打扰了</p>\n","text":"Ahhh, 打扰了","link":"","raw":null,"photos":[],"categories":[],"tags":[{"name":"Girl","slug":"Girl","count":1,"path":"api/tags/Girl.json"}]},{"title":"更简单高效的HTML数据提取-Xpath","slug":"Xpath","date":"2018-11-30T11:41:18.847Z","updated":"2018-11-30T11:41:18.848Z","comments":true,"path":"api/articles/Xpath.json","excerpt":"","keywords":null,"cover":null,"content":"<h1 id=\"更简单高效的HTML数据提取-Xpath\"><a href=\"#更简单高效的HTML数据提取-Xpath\" class=\"headerlink\" title=\"更简单高效的HTML数据提取-Xpath\"></a>更简单高效的HTML数据提取-Xpath</h1><p>本文地址：<a href=\"https://www.jianshu.com/p/90e4b83575e2\" target=\"_blank\" rel=\"noopener\">https://www.jianshu.com/p/90e4b83575e2</a></p>\n<p><strong>XPath 是一门在 XML 文档中查找信息的语言。XPath 用于在 XML 文档中通过元素和属性进行导航。</strong></p>\n<p>相比于<code>BeautifulSoup</code>，<code>Xpath</code>在提取数据时会更加的方便。</p>\n<p>官方文档地址：<a href=\"https://lxml.de/tutorial.html\" target=\"_blank\" rel=\"noopener\">https://lxml.de/tutorial.html</a></p>\n<hr>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><p>在Python中很多库都有提供<code>Xpath</code>的功能，但是最基本的还是<code>lxml</code>这个库，效率最高。在之前<code>BeautifulSoup</code>章节中我们也介绍到了<code>lxml</code>是如何安装的。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install lxml</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"语法\"><a href=\"#语法\" class=\"headerlink\" title=\"语法\"></a>语法</h2><p>XPath 使用路径表达式在 XML 文档中选取节点。节点是通过沿着路径或者 step 来选取的。</p>\n<p>我们将用以下的HTML文档来进行演示：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">html_doc = '''<span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bookstore</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">book</span> <span class=\"attr\">category</span>=<span class=\"string\">\"COOKING\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">title</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span>Everyday Italian<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">author</span>&gt;</span>Giada De Laurentiis<span class=\"tag\">&lt;/<span class=\"name\">author</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">year</span>&gt;</span>2005<span class=\"tag\">&lt;/<span class=\"name\">year</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">price</span>&gt;</span>30.00<span class=\"tag\">&lt;/<span class=\"name\">price</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">book</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">book</span> <span class=\"attr\">category</span>=<span class=\"string\">\"CHILDREN\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">title</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span>Harry Potter<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">author</span>&gt;</span>J K. Rowling<span class=\"tag\">&lt;/<span class=\"name\">author</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">year</span>&gt;</span>2005<span class=\"tag\">&lt;/<span class=\"name\">year</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">price</span>&gt;</span>29.99<span class=\"tag\">&lt;/<span class=\"name\">price</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">book</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">book</span> <span class=\"attr\">category</span>=<span class=\"string\">\"WEB\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">title</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span>XQuery Kick Start<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">author</span>&gt;</span>James McGovern<span class=\"tag\">&lt;/<span class=\"name\">author</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">author</span>&gt;</span>Per Bothner<span class=\"tag\">&lt;/<span class=\"name\">author</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">author</span>&gt;</span>Kurt Cagle<span class=\"tag\">&lt;/<span class=\"name\">author</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">author</span>&gt;</span>James Linn<span class=\"tag\">&lt;/<span class=\"name\">author</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">author</span>&gt;</span>Vaidyanathan Nagarajan<span class=\"tag\">&lt;/<span class=\"name\">author</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">year</span>&gt;</span>2003<span class=\"tag\">&lt;/<span class=\"name\">year</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">price</span>&gt;</span>49.99<span class=\"tag\">&lt;/<span class=\"name\">price</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">book</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">book</span> <span class=\"attr\">category</span>=<span class=\"string\">\"WEB\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">title</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span>Learning XML<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">author</span>&gt;</span>Erik T. Ray<span class=\"tag\">&lt;/<span class=\"name\">author</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">year</span>&gt;</span>2003<span class=\"tag\">&lt;/<span class=\"name\">year</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">price</span>&gt;</span>39.95<span class=\"tag\">&lt;/<span class=\"name\">price</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">book</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bookstore</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span>'''</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> lxml <span class=\"keyword\">import</span> etree</span><br><span class=\"line\"></span><br><span class=\"line\">page = etree.HTML(html_doc)</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"路径查找\"><a href=\"#路径查找\" class=\"headerlink\" title=\"路径查找\"></a>路径查找</h3><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">表达式</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">nodename</td>\n<td>选取此节点的子节点。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">/</td>\n<td>从根节点选取。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">//</td>\n<td>从匹配选择的当前节点选择文档中的节点，而不考虑它们的位置。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">.</td>\n<td>选取当前节点。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">..</td>\n<td>选取当前节点的父节点。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">@</td>\n<td>选取属性。</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><p>查找当前节点的子节点</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">1</span>]: page.xpath(<span class=\"string\">'head'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">1</span>]: [&lt;Element head at <span class=\"number\">0x111c74c48</span>&gt;]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>从根节点进行查找</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">2</span>]: page.xpath(<span class=\"string\">'/html'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">2</span>]: [&lt;Element html at <span class=\"number\">0x11208be88</span>&gt;]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>从整个文档中所有节点查找</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">3</span>]: page.xpath(<span class=\"string\">'//book'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">3</span>]:</span><br><span class=\"line\">[&lt;Element book at <span class=\"number\">0x1128c02c8</span>&gt;,</span><br><span class=\"line\"> &lt;Element book at <span class=\"number\">0x111c74108</span>&gt;,</span><br><span class=\"line\"> &lt;Element book at <span class=\"number\">0x111fd2288</span>&gt;,</span><br><span class=\"line\"> &lt;Element book at <span class=\"number\">0x1128da348</span>&gt;]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>选取当前节点的父节点</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">4</span>]: page.xpath(<span class=\"string\">'//book'</span>)[<span class=\"number\">0</span>].xpath(<span class=\"string\">'..'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">4</span>]: [&lt;Element bookstore at <span class=\"number\">0x1128c0ac8</span>&gt;]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>选取属性</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">5</span>]: page.xpath(<span class=\"string\">'//book'</span>)[<span class=\"number\">0</span>].xpath(<span class=\"string\">'@category'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">5</span>]: [<span class=\"string\">'COOKING'</span>]</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"节点查找\"><a href=\"#节点查找\" class=\"headerlink\" title=\"节点查找\"></a>节点查找</h3><table>\n<thead>\n<tr>\n<th>表达式</th>\n<th>结果</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>nodename[1]</td>\n<td>选取第一个元素。</td>\n</tr>\n<tr>\n<td>nodename[last()]</td>\n<td>选取最后一个元素。</td>\n</tr>\n<tr>\n<td>nodename[last()-1]</td>\n<td>选取倒数第二个元素。</td>\n</tr>\n<tr>\n<td>nodename[position()&lt;3]</td>\n<td>选取前两个子元素。</td>\n</tr>\n<tr>\n<td>nodename[@lang]</td>\n<td>选取拥有名为 lang 的属性的元素。</td>\n</tr>\n<tr>\n<td>nodename[@lang=’eng’]</td>\n<td>选取拥有lang属性，且值为 eng 的元素。</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><p>选取第二个book元素</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">1</span>]: page.xpath(<span class=\"string\">'//book[2]/@category'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">1</span>]: [<span class=\"string\">'CHILDREN'</span>]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>选取倒数第三个book元素</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">2</span>]: page.xpath(<span class=\"string\">'//book[last()-2]/@category'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">2</span>]: [<span class=\"string\">'CHILDREN'</span>]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>选取第二个元素开始的所有元素</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">3</span>]: page.xpath(<span class=\"string\">'//book[position() &gt; 1]/@category'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">3</span>]: [<span class=\"string\">'CHILDREN'</span>, <span class=\"string\">'WEB'</span>, <span class=\"string\">'WEB'</span>]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>选取category属性为WEB的的元素</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">4</span>]: page.xpath(<span class=\"string\">'//book[@category=\"WEB\"]/@category'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">4</span>]: [<span class=\"string\">'WEB'</span>, <span class=\"string\">'WEB'</span>]</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"未知节点\"><a href=\"#未知节点\" class=\"headerlink\" title=\"未知节点\"></a>未知节点</h3><table>\n<thead>\n<tr>\n<th>通配符</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>*</td>\n<td>匹配任何元素节点。</td>\n</tr>\n<tr>\n<td>@*</td>\n<td>匹配任何属性节点。</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><p>匹配第一个book元素下的所有元素</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">1</span>]: page.xpath(<span class=\"string\">'//book[1]/*'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">1</span>]:</span><br><span class=\"line\">[&lt;Element title at <span class=\"number\">0x111f76788</span>&gt;,</span><br><span class=\"line\"> &lt;Element author at <span class=\"number\">0x111f76188</span>&gt;,</span><br><span class=\"line\"> &lt;Element year at <span class=\"number\">0x1128c1a88</span>&gt;,</span><br><span class=\"line\"> &lt;Element price at <span class=\"number\">0x1128c1cc8</span>&gt;]</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"获取节点中的文本\"><a href=\"#获取节点中的文本\" class=\"headerlink\" title=\"获取节点中的文本\"></a>获取节点中的文本</h3><ul>\n<li><p>用<code>text()</code>获取某个节点下的文本</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">1</span>]: page.xpath(<span class=\"string\">'//book[1]/author/text()'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">1</span>]: [<span class=\"string\">'Giada De Laurentiis'</span>]</span><br></pre></td></tr></table></figure>\n<p>如果这个节点下有多个文本，则只能取到一段。</p>\n</li>\n<li><p>用<code>string()</code>获取某个节点下所有的文本</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">2</span>]: page.xpath(<span class=\"string\">'string(//book[1])'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">2</span>]: <span class=\"string\">'\\n            Everyday Italian\\n            Giada De Laurentiis\\n            2005\\n            30.00\\n        '</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"选取多个路径\"><a href=\"#选取多个路径\" class=\"headerlink\" title=\"选取多个路径\"></a>选取多个路径</h3><p>通过在路径表达式中使用“|”运算符，您可以选取若干个路径。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">1</span>]: page.xpath(<span class=\"string\">'//book[1]/title/text() | //book[1]/author/text()'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">1</span>]: [<span class=\"string\">'Everyday Italian'</span>, <span class=\"string\">'Giada De Laurentiis'</span>]</span><br></pre></td></tr></table></figure>\n","text":"更简单高效的HTML数据提取-Xpath本文地址：https://www.jianshu.com/p/90e4b83575e2XPath 是一门在 XML 文档中查找信息的语言。XPath 用于在 XML 文档中通过元素和属性进行导航。相比于BeautifulSoup，Xpath","link":"","raw":null,"photos":[],"categories":[],"tags":[]},{"title":"Hello World","slug":"hello-world","date":"2018-11-29T11:23:39.318Z","updated":"2018-11-29T11:23:39.318Z","comments":true,"path":"api/articles/hello-world.json","excerpt":"","keywords":null,"cover":null,"content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the ","link":"","raw":null,"photos":[],"categories":[],"tags":[]}]}