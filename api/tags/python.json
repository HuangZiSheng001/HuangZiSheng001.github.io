{"name":"python","slug":"python","count":2,"postlist":[{"title":"Scrapy的运作流程","slug":"Scrapy-01","date":"2018-12-02T07:21:06.000Z","updated":"2018-12-02T07:32:26.802Z","comments":true,"path":"api/articles/Scrapy-01.json","excerpt":"","keywords":null,"cover":null,"content":"<h2 id=\"前言：\"><a href=\"#前言：\" class=\"headerlink\" title=\"前言：\"></a>前言：</h2><p>​    看到个很通俗的Scrapy运行过程的解释，分享之。</p>\n<p>​    emmm……Scrapy的基本结构和入门教程以及本文章原文请参考<a href=\"http://www.runoob.com/w3cnote/scrapy-detail.html\" target=\"_blank\" rel=\"noopener\">这里</a></p>\n<h2 id=\"Scrapy的运作流程\"><a href=\"#Scrapy的运作流程\" class=\"headerlink\" title=\"Scrapy的运作流程\"></a>Scrapy的运作流程</h2><p>代码写好，程序开始运行…</p>\n<p><strong>1 引擎：Hi！Spider, 你要处理哪一个网站？</strong><br><strong>2 Spider：老大要我处理xxxx.com。</strong><br><strong>3 引擎：你把第一个需要处理的URL给我吧。</strong><br><strong>4 Spider：给你，第一个URL是xxxxxxx.com。</strong><br><strong>5 引擎：Hi！调度器，我这有request请求你帮我排序入队一下。</strong><br><strong>6 调度器：好的，正在处理你等一下。</strong><br><strong>7 引擎：Hi！调度器，把你处理好的request请求给我。</strong><br><strong>8 调度器：给你，这是我处理好的request</strong><br><strong>9 引擎：Hi！下载器，你按照老大的下载中间件的设置帮我下载一下这个request请求</strong><br><strong>10 下载器：好的！给你，这是下载好的东西。（如果失败：sorry，这个request下载失败了。然后引擎告诉调度器，这个request下载失败了，你记录一下，我们待会儿再下载）</strong><br><strong>11 引擎：Hi！Spider，这是下载好的东西，并且已经按照老大的下载中间件处理过了，你自己处理一下（注意！这儿responses默认是交给def parse()这个函数处理的）</strong><br><strong>12 Spider：（处理完毕数据之后对于需要跟进的URL），Hi！引擎，我这里有两个结果，这个是我需要跟进的URL，还有这个是我获取到的Item数据。</strong><br><strong>13 引擎：Hi ！管道 我这儿有个item你帮我处理一下！调度器！这是需要跟进URL你帮我处理下。然后从第四步开始循环，直到获取完老大需要全部信息。</strong><br><strong>14 管道调度器：好的，现在就做！</strong><br><strong>注意！只有当调度器中不存在任何request了，整个程序才会停止，（也就是说，对于下载失败的URL，Scrapy也会重新下载。）</strong></p>\n<h2 id=\"Scrapy爬虫制作过程\"><a href=\"#Scrapy爬虫制作过程\" class=\"headerlink\" title=\"Scrapy爬虫制作过程\"></a>Scrapy爬虫制作过程</h2><p>制作 Scrapy 爬虫 一共需要4步：<br>①新建项目 (scrapy startproject xxx)：新建一个新的爬虫项目<br>②明确目标 （编写items.py）：明确你想要抓取的目标<br>③制作爬虫 （spiders/xxspider.py）：制作爬虫开始爬取网页<br>④存储内容 （pipelines.py）：设计管道存储爬取内容</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>","text":"前言：​    看到个很通俗的Scrapy运行过程的解释，分享之。​    emmm……Scrapy的基本结构和入门教程以及本文章原文请参考这里Scrapy的运作流程代码写好，程序开始运行…1 引擎：Hi！Spider, 你要处理哪一个网站？<br>2 Spider：老大要我处理","link":"","raw":null,"photos":[],"categories":[{"name":"study","slug":"study","count":3,"path":"api/categories/study.json"}],"tags":[{"name":"python","slug":"python","count":2,"path":"api/tags/python.json"},{"name":"爬虫","slug":"爬虫","count":2,"path":"api/tags/爬虫.json"}]},{"title":"更简单高效的HTML数据提取-Xpath","slug":"Xpath","date":"2018-11-30T12:22:18.000Z","updated":"2018-12-02T07:24:42.974Z","comments":true,"path":"api/articles/Xpath.json","excerpt":"","keywords":null,"cover":null,"content":"<h1 id=\"更简单高效的HTML数据提取-Xpath\"><a href=\"#更简单高效的HTML数据提取-Xpath\" class=\"headerlink\" title=\"更简单高效的HTML数据提取-Xpath\"></a>更简单高效的HTML数据提取-Xpath</h1><p>本文地址：<a href=\"https://www.jianshu.com/p/90e4b83575e2\" target=\"_blank\" rel=\"noopener\">https://www.jianshu.com/p/90e4b83575e2</a></p>\n<p><strong>XPath 是一门在 XML 文档中查找信息的语言。XPath 用于在 XML 文档中通过元素和属性进行导航。</strong></p>\n<p>相比于<code>BeautifulSoup</code>，<code>Xpath</code>在提取数据时会更加的方便。</p>\n<p>官方文档地址：<a href=\"https://lxml.de/tutorial.html\" target=\"_blank\" rel=\"noopener\">https://lxml.de/tutorial.html</a></p>\n<hr>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><p>在Python中很多库都有提供<code>Xpath</code>的功能，但是最基本的还是<code>lxml</code>这个库，效率最高。在之前<code>BeautifulSoup</code>章节中我们也介绍到了<code>lxml</code>是如何安装的。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install lxml</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"语法\"><a href=\"#语法\" class=\"headerlink\" title=\"语法\"></a>语法</h2><p>XPath 使用路径表达式在 XML 文档中选取节点。节点是通过沿着路径或者 step 来选取的。</p>\n<p>我们将用以下的HTML文档来进行演示：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">html_doc = '''<span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bookstore</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">book</span> <span class=\"attr\">category</span>=<span class=\"string\">\"COOKING\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">title</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span>Everyday Italian<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">author</span>&gt;</span>Giada De Laurentiis<span class=\"tag\">&lt;/<span class=\"name\">author</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">year</span>&gt;</span>2005<span class=\"tag\">&lt;/<span class=\"name\">year</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">price</span>&gt;</span>30.00<span class=\"tag\">&lt;/<span class=\"name\">price</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">book</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">book</span> <span class=\"attr\">category</span>=<span class=\"string\">\"CHILDREN\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">title</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span>Harry Potter<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">author</span>&gt;</span>J K. Rowling<span class=\"tag\">&lt;/<span class=\"name\">author</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">year</span>&gt;</span>2005<span class=\"tag\">&lt;/<span class=\"name\">year</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">price</span>&gt;</span>29.99<span class=\"tag\">&lt;/<span class=\"name\">price</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">book</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">book</span> <span class=\"attr\">category</span>=<span class=\"string\">\"WEB\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">title</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span>XQuery Kick Start<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">author</span>&gt;</span>James McGovern<span class=\"tag\">&lt;/<span class=\"name\">author</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">author</span>&gt;</span>Per Bothner<span class=\"tag\">&lt;/<span class=\"name\">author</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">author</span>&gt;</span>Kurt Cagle<span class=\"tag\">&lt;/<span class=\"name\">author</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">author</span>&gt;</span>James Linn<span class=\"tag\">&lt;/<span class=\"name\">author</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">author</span>&gt;</span>Vaidyanathan Nagarajan<span class=\"tag\">&lt;/<span class=\"name\">author</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">year</span>&gt;</span>2003<span class=\"tag\">&lt;/<span class=\"name\">year</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">price</span>&gt;</span>49.99<span class=\"tag\">&lt;/<span class=\"name\">price</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">book</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">book</span> <span class=\"attr\">category</span>=<span class=\"string\">\"WEB\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">title</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span>Learning XML<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">author</span>&gt;</span>Erik T. Ray<span class=\"tag\">&lt;/<span class=\"name\">author</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">year</span>&gt;</span>2003<span class=\"tag\">&lt;/<span class=\"name\">year</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">price</span>&gt;</span>39.95<span class=\"tag\">&lt;/<span class=\"name\">price</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">book</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bookstore</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span>'''</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> lxml <span class=\"keyword\">import</span> etree</span><br><span class=\"line\"></span><br><span class=\"line\">page = etree.HTML(html_doc)</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"路径查找\"><a href=\"#路径查找\" class=\"headerlink\" title=\"路径查找\"></a>路径查找</h3><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">表达式</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">nodename</td>\n<td>选取此节点的子节点。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">/</td>\n<td>从根节点选取。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">//</td>\n<td>从匹配选择的当前节点选择文档中的节点，而不考虑它们的位置。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">.</td>\n<td>选取当前节点。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">..</td>\n<td>选取当前节点的父节点。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">@</td>\n<td>选取属性。</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><p>查找当前节点的子节点</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">1</span>]: page.xpath(<span class=\"string\">'head'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">1</span>]: [&lt;Element head at <span class=\"number\">0x111c74c48</span>&gt;]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>从根节点进行查找</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">2</span>]: page.xpath(<span class=\"string\">'/html'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">2</span>]: [&lt;Element html at <span class=\"number\">0x11208be88</span>&gt;]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>从整个文档中所有节点查找</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">3</span>]: page.xpath(<span class=\"string\">'//book'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">3</span>]:</span><br><span class=\"line\">[&lt;Element book at <span class=\"number\">0x1128c02c8</span>&gt;,</span><br><span class=\"line\"> &lt;Element book at <span class=\"number\">0x111c74108</span>&gt;,</span><br><span class=\"line\"> &lt;Element book at <span class=\"number\">0x111fd2288</span>&gt;,</span><br><span class=\"line\"> &lt;Element book at <span class=\"number\">0x1128da348</span>&gt;]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>选取当前节点的父节点</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">4</span>]: page.xpath(<span class=\"string\">'//book'</span>)[<span class=\"number\">0</span>].xpath(<span class=\"string\">'..'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">4</span>]: [&lt;Element bookstore at <span class=\"number\">0x1128c0ac8</span>&gt;]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>选取属性</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">5</span>]: page.xpath(<span class=\"string\">'//book'</span>)[<span class=\"number\">0</span>].xpath(<span class=\"string\">'@category'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">5</span>]: [<span class=\"string\">'COOKING'</span>]</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"节点查找\"><a href=\"#节点查找\" class=\"headerlink\" title=\"节点查找\"></a>节点查找</h3><table>\n<thead>\n<tr>\n<th>表达式</th>\n<th>结果</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>nodename[1]</td>\n<td>选取第一个元素。</td>\n</tr>\n<tr>\n<td>nodename[last()]</td>\n<td>选取最后一个元素。</td>\n</tr>\n<tr>\n<td>nodename[last()-1]</td>\n<td>选取倒数第二个元素。</td>\n</tr>\n<tr>\n<td>nodename[position()&lt;3]</td>\n<td>选取前两个子元素。</td>\n</tr>\n<tr>\n<td>nodename[@lang]</td>\n<td>选取拥有名为 lang 的属性的元素。</td>\n</tr>\n<tr>\n<td>nodename[@lang=’eng’]</td>\n<td>选取拥有lang属性，且值为 eng 的元素。</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><p>选取第二个book元素</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">1</span>]: page.xpath(<span class=\"string\">'//book[2]/@category'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">1</span>]: [<span class=\"string\">'CHILDREN'</span>]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>选取倒数第三个book元素</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">2</span>]: page.xpath(<span class=\"string\">'//book[last()-2]/@category'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">2</span>]: [<span class=\"string\">'CHILDREN'</span>]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>选取第二个元素开始的所有元素</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">3</span>]: page.xpath(<span class=\"string\">'//book[position() &gt; 1]/@category'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">3</span>]: [<span class=\"string\">'CHILDREN'</span>, <span class=\"string\">'WEB'</span>, <span class=\"string\">'WEB'</span>]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>选取category属性为WEB的的元素</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">4</span>]: page.xpath(<span class=\"string\">'//book[@category=\"WEB\"]/@category'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">4</span>]: [<span class=\"string\">'WEB'</span>, <span class=\"string\">'WEB'</span>]</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"未知节点\"><a href=\"#未知节点\" class=\"headerlink\" title=\"未知节点\"></a>未知节点</h3><table>\n<thead>\n<tr>\n<th>通配符</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>*</td>\n<td>匹配任何元素节点。</td>\n</tr>\n<tr>\n<td>@*</td>\n<td>匹配任何属性节点。</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><p>匹配第一个book元素下的所有元素</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">1</span>]: page.xpath(<span class=\"string\">'//book[1]/*'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">1</span>]:</span><br><span class=\"line\">[&lt;Element title at <span class=\"number\">0x111f76788</span>&gt;,</span><br><span class=\"line\"> &lt;Element author at <span class=\"number\">0x111f76188</span>&gt;,</span><br><span class=\"line\"> &lt;Element year at <span class=\"number\">0x1128c1a88</span>&gt;,</span><br><span class=\"line\"> &lt;Element price at <span class=\"number\">0x1128c1cc8</span>&gt;]</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"获取节点中的文本\"><a href=\"#获取节点中的文本\" class=\"headerlink\" title=\"获取节点中的文本\"></a>获取节点中的文本</h3><ul>\n<li><p>用<code>text()</code>获取某个节点下的文本</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">1</span>]: page.xpath(<span class=\"string\">'//book[1]/author/text()'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">1</span>]: [<span class=\"string\">'Giada De Laurentiis'</span>]</span><br></pre></td></tr></table></figure>\n<p>如果这个节点下有多个文本，则只能取到一段。</p>\n</li>\n<li><p>用<code>string()</code>获取某个节点下所有的文本</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">2</span>]: page.xpath(<span class=\"string\">'string(//book[1])'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">2</span>]: <span class=\"string\">'\\n            Everyday Italian\\n            Giada De Laurentiis\\n            2005\\n            30.00\\n        '</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h3 id=\"选取多个路径\"><a href=\"#选取多个路径\" class=\"headerlink\" title=\"选取多个路径\"></a>选取多个路径</h3><p>通过在路径表达式中使用“|”运算符，您可以选取若干个路径。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In [<span class=\"number\">1</span>]: page.xpath(<span class=\"string\">'//book[1]/title/text() | //book[1]/author/text()'</span>)</span><br><span class=\"line\">Out[<span class=\"number\">1</span>]: [<span class=\"string\">'Everyday Italian'</span>, <span class=\"string\">'Giada De Laurentiis'</span>]</span><br></pre></td></tr></table></figure>\n","text":"更简单高效的HTML数据提取-Xpath本文地址：https://www.jianshu.com/p/90e4b83575e2XPath 是一门在 XML 文档中查找信息的语言。XPath 用于在 XML 文档中通过元素和属性进行导航。相比于BeautifulSoup，Xpath","link":"","raw":null,"photos":[],"categories":[{"name":"study","slug":"study","count":3,"path":"api/categories/study.json"}],"tags":[{"name":"python","slug":"python","count":2,"path":"api/tags/python.json"},{"name":"爬虫","slug":"爬虫","count":2,"path":"api/tags/爬虫.json"},{"name":"xpath","slug":"xpath","count":1,"path":"api/tags/xpath.json"}]}]}